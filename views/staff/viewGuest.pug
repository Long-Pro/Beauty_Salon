extends ../template/layoutStaff.pug
block css 
  link(rel='stylesheet' href='/css/userDetail.css')
  link(rel='stylesheet' href='/css/acc.css')
  link(rel='stylesheet' href='/css/userOrder.css')
block content 
  .container
    .userDetail
      .userInfo(style="margin-bottom:100px")
        .row
          .col-3
            .card(style='background-color: #81ecec;')
              if user. GIOITINH=='Nam'
                img.card-img-top(src='/images/avataNam.jpg' alt='Card image' style='width: 100%;')
              else 
                img.card-img-top(src='/images/avataNu.jpg' alt='Card image' style='width: 100%;')
              .card-body
                h4.card-title #{user.TEN}
                .d-flex.justify-content-between
                  p.card-text #{loaiKhach}
                  span #{user.DIEMTICHLUY}điểm
          .col-9
            h2 THÔNG TIN CÁ NHÂN
            form#form-1(action='/staff/work/tckh' method='post')
              .row
                .col-6
                  .form-group
                    label.form-label(for='fullname') Tên đầy đủ:
                    input#fullname.form-control(type='text' placeholder='VD: Nguyễn Văn Long  ' name='fullname' value=user.TEN rules='required')
                    span.form-message
                .col-6 
                  .form-group
                    label.form-label(for='sdt') Số điện thoai:
                    input#sdt.form-control(type='text' placeholder='VD: 0398291602' name='sdt'  rules='required|phone' value=user.SDT )
                    span.form-message
                .col-6
                  .form-group
                    label.form-label(for='gender') Giới tính:
                    select#gender.form-control(name='gender')
                      option(value='Nam'  selected=user.GIOITINH=='Nam') Nam
                      option(value='Nữ' selected=user.GIOITINH=='Nữ') Nữ
                      option(value='Khác' selected=user.GIOITINH=='Khác') Khác
                    span.form-message
                if taiKhoan 
                  .col-6
                    .form-group
                      label.form-label(for='account') Tài khoản:
                      input#account.form-control(type='text' placeholder='VD: LongProNo1' name='account' rules='required|min:6|max:12'  value=taiKhoan disabled)
                      span.form-message
                
                if !taiKhoan 
                  .col-6
                .col-6
                  button.btn.btn-primary(type='submit') Lưu thay đổi
        hr.mt-5
  .container
        .userData  
            h4 Lịch sử cắt tóc
            .row
              .col-2
              .col-8            
                  each item in kq 
                      .bill.my-5 
                          .billHeader.d-flex.justify-content-between.my-3
                              .idBill 
                                  span.valueIdBill MAHD: #{item.info.MA}
                              .statusBill 
                                  h4(style='') Đã hoàn thành
                              .timeBill #{item.info.THOIGIAN}
                          table.mt-3
                              tr
                                  th Dịch vụ
                                  th Nhân viên thực hiện
                                  th Giá tiền 
                              each item2 in item.value.data
                                  tr
                                      td #{item2.TEN}
                                      td #{item2.MANV}
                                      td #{item2.GIA}đ
                          div
                            .d-flex.justify-content-between.my-5
                                span#sumPrice Tổng tiền: #{item.value.sum}đ
                                span Tỉ lệ giảm giá: #{item.value.tlgg}%
                            p#currPrice Tiền thanh toán: #{item.value.price}đ
                            p#nvtn Nhân viên thu ngân: #{item.info.MANV}
              .col-2
      
  script(src='/js/validator.js')
  script.
    Validator('#form-1',{
    onSubmit:function(data){
    console.log('CALL API...')
    console.log(data)
    }
    })



